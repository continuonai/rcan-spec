---
interface Props {
  rrn: string;
  name: string;
  manufacturer: string;
  model: string;
  description: string;
  image?: string;
  status: 'active' | 'retired' | 'prototype' | 'concept';
  tags: string[];
}

const { rrn, name, manufacturer, model, description, image, status, tags } = Astro.props;

const statusColors = {
  active: '#22c55e',
  retired: '#6b7280',
  prototype: '#f59e0b',
  concept: '#8b5cf6',
};

const statusColor = statusColors[status];
---

<a href={`/registry/${rrn}/`} class="robot-card" data-name={name.toLowerCase()} data-manufacturer={manufacturer.toLowerCase()} data-tags={tags.join(',').toLowerCase()}>
  <div class="card-image">
    <img src={image || '/robots/placeholder.svg'} alt={name} loading="lazy" />
  </div>
  <div class="card-content">
    <div class="card-header">
      <span class="status-badge" style={`--status-color: ${statusColor}`}>{status}</span>
      <span class="rrn">{rrn}</span>
    </div>
    <h3 class="card-title">{name}</h3>
    <p class="card-manufacturer">{manufacturer}</p>
    <p class="card-description">{description}</p>
    <div class="card-tags">
      {tags.slice(0, 3).map(tag => (
        <span class="tag">{tag}</span>
      ))}
      {tags.length > 3 && <span class="tag tag-more">+{tags.length - 3}</span>}
    </div>
  </div>
</a>

<style>
  .robot-card {
    display: flex;
    flex-direction: column;
    background: var(--color-bg-alt);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.25s ease;
    text-decoration: none;
    color: inherit;
  }

  .robot-card:hover {
    border-color: var(--color-accent);
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(34, 211, 238, 0.15);
  }

  .card-image {
    width: 100%;
    aspect-ratio: 4/3;
    overflow: hidden;
    background: var(--color-bg);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .card-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    padding: 1rem;
  }

  .card-content {
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .status-badge {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    background: color-mix(in srgb, var(--status-color) 20%, transparent);
    color: var(--status-color);
  }

  .rrn {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--color-text-muted);
  }

  .card-title {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0;
    line-height: 1.3;
  }

  .card-manufacturer {
    font-size: 0.875rem;
    color: var(--color-accent);
    margin: 0;
  }

  .card-description {
    font-size: 0.8rem;
    color: var(--color-text-muted);
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.5;
  }

  .card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.4rem;
    margin-top: 0.5rem;
  }

  .tag {
    font-size: 0.7rem;
    padding: 0.15rem 0.5rem;
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: 4px;
    color: var(--color-text-muted);
  }

  .tag-more {
    background: var(--color-border);
  }
</style>

